@model RaceAnalysis.Models.TriStatsViewModel
@{
    Layout = "~/Views/Layouts/_AnalysisLayout.cshtml";
    PageData["Title"] = "Race Stats";
    PageData["Instructions"] = "Select one or more races for detailed stats";
}



@section page_actions{
      @if(Model.Stats.Count > 0)
      {
        @Html.ActionLink("Filter by Time", "ShowFilterByDuration", null,
                                                 new
                                                 {
                                                     races = @String.Join(",", Model.Filter.SelectedRaceIds.Select(x => x.ToString()).ToArray()),
                                                     agegroups = @String.Join(",", Model.Filter.SelectedAgeGroupIds.Select(x => x.ToString()).ToArray()),
                                                     genders = @String.Join(",", Model.Filter.SelectedGenderIds.Select(x => x.ToString()).ToArray())
                                                 },
                                                 new { @class = "modal-link btn btn-success btn-duration", title = "Filter by Time" })

       }
     

}<!--section-->

 

@section results{
    @if (Model.Stats.Count > 0)
    {
        <script type="text/javascript">  $("#results").show(); </script>

        foreach (var stat in Model.Stats)
        {
                @Html.Partial("~/Views/Shared/_RaceConditions.cshtml", stat)
                @Html.Partial("~/Views/Shared/_TriStats.cshtml",stat)
                @Html.Partial("~/Views/Shared/_StatsChart.cshtml",stat)
        }
    }
}



