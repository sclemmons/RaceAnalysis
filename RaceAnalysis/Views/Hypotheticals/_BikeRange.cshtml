@model RaceAnalysis.Models.RaceFilterViewModel  

<div id="filter-duration">
    <div class="time-range">
        <label>Slide the handles to indicate your hypothetical bike split (min-to-max):</label>

        <div class="time-range-span">
            <span id="slider-lowtime" name="bikelowspan">00:00</span> - <span id="slider-hightime" name="bikehighspan">17:00 hrs</span>
            @Html.Hidden("bikelowtimevalue", "", new { @class = "slider-lowtime-value" })
            @Html.Hidden("bikehightimevalue", "", new { @class = "slider-hightime-value" })
        </div>
        <div class="slider-step">
            <div id="s1" class="slider-range" name="bike-slider">   </div>
        </div>
        @Ajax.ActionLink("Apply...",
                        "GivenBikeTime", "Hypotheticals",
                        null,
                        new AjaxOptions
                        {
                            UpdateTargetId = "BikeRangeDiv",
                            InsertionMode = InsertionMode.Replace,
                            HttpMethod = "GET",
                            OnBegin = "beginPost"
                        },
                        htmlAttributes: new { id = "BikeRangeSubmit", @class= "btn btn-default"})
    </div>


</div>


<script>
    $(document).ready(function () {
        $('.time-range').each(function () {
            $(this).find('#s1').empty().slider({
                range: true,
                min: 0,
                max: 1020,
                step: 15,
                values: [000, 1020],
                slide: function (e, ui) {
                    var hours1 = Math.floor(ui.values[0] / 60);
                    var minutes1 = ui.values[0] - (hours1 * 60);

                    if (hours1.length == 1) hours1 = '0' + hours1;
                    if (minutes1.length == 1) minutes1 = '0' + minutes1;
                    if (minutes1 == 0) minutes1 = '00';

                    $(this).parent().parent().find('#slider-lowtime').html(hours1 + ':' + minutes1);

                    var hours2 = Math.floor(ui.values[1] / 60);
                    var minutes2 = ui.values[1] - (hours2 * 60);

                    if (hours2.length == 1) hours2 = '0' + hours2;
                    if (minutes2.length == 1) minutes2 = '0' + minutes2;
                    if (minutes2 == 0) minutes2 = '00';

                    $(this).parent().parent().find('#slider-hightime').html(hours2 + ':' + minutes2 + " hrs");
                },
                stop: function (e, ui) {
                    $(this).parent().parent().find('.slider-lowtime-value').val(ui.values[0]);
                    $(this).parent().parent().find('.slider-hightime-value').val(ui.values[1]);

                }

            });
        });

      
        $('div[name=bike-slider]').slider("option", "min", 3*60);
        $('div[name=bike-slider]').slider("option", "max", 10*60);
        $('div[name=bike-slider]').slider("option", "values", [@Model.BikeLow.TotalMinutes,@Model.BikeHigh.TotalMinutes]);
        $('span[name=bikelowspan]').html('@Model.BikeLow.ToString("hh\\:mm")');
        $('span[name=bikehighspan]').html('@Model.BikeHigh.ToString("hh\\:mm")' + ' hrs');

    })

</script>

